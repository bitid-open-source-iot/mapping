(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"4sOm":function(t,i,e){"use strict";e.r(i),e.d(i,"NotificationsModule",(function(){return q}));var n=e("3lET"),o=e("ofXK"),r=e("fXoL");let s=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(i){return new(i||t)},imports:[[o.c]]}),t})();var c=e("NFeN"),a=e("qFsG"),b=e("bTqV"),l=e("0IaG"),m=e("d3UM"),u=e("/t3+"),f=e("FKr1");let p=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(i){return new(i||t)},imports:[[o.c,c.b,f.m]]}),t})();var d=e("kmnG"),h=e("bv9b"),g=e("mrSG"),v=e("IQQo"),y=e("3Pt+"),O=e("dWDE");function x(t,i){1&t&&r.Pb(0,"mat-progress-bar",12)}function w(t,i){if(1&t&&(r.Tb(0,"mat-option",13),r.xc(1),r.Sb()),2&t){const t=i.$implicit;r.mc("value",t.value),r.Bb(1),r.zc(" ",t.title," ")}}function S(t,i){if(1&t&&(r.Tb(0,"mat-error"),r.xc(1),r.Sb()),2&t){const t=r.fc();r.Bb(1),r.zc(" ",t.errors.sort," ")}}function T(t,i){if(1&t&&(r.Tb(0,"mat-error"),r.xc(1),r.Sb()),2&t){const t=r.fc();r.Bb(1),r.zc(" ",t.errors.limit," ")}}let M=(()=>{class t{constructor(t,i,e){this.dialog=t,this.data=i,this.formerror=e,this.form=new y.d({sort:new y.b(this.data.sort.key),limit:new y.b(this.data.limit,[y.p.required,y.p.min(1),y.p.max(1e3)]),reverse:new y.b(this.data.sort.reverse)}),this.sort=[{value:"date",title:"Date"},{value:"title",title:"Title"},{value:"message",title:"Message"}],this.errors={sort:"",limit:"",reverse:"",systemId:""},this.status=[],this.systems=[],this.subscriptions={}}close(){this.dialog.close(!1)}submit(){this.dialog.close({sort:{key:this.form.value.sort,reverse:this.form.value.reverse},limit:this.form.value.limit})}reverse(t){t.stopPropagation(),this.form.controls.reverse.setValue(!this.form.value.reverse)}ngOnInit(){this.subscriptions.form=this.form.valueChanges.subscribe(t=>{this.errors=this.formerror.validateForm(this.form,this.errors,!0)})}ngOnDestroy(){this.subscriptions.form.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(r.Ob(l.d),r.Ob(l.a),r.Ob(O.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-filter-notifications"]],decls:24,vars:6,consts:[["color","primary"],[1,"spacer"],["type","button","mat-icon-button","",3,"click"],["mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","outline"],["name","sort","placeholder","sort","formControlName","sort"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","type","button","mat-icon-button","",3,"click"],[4,"ngIf"],["matInput","","min","1","max","1000","type","number","name","limit","placeholder","limit","formControlName","limit","required",""],["type","submit","mat-flat-button","","color","primary"],["mode","indeterminate"],[3,"value"]],template:function(t,i){1&t&&(r.Tb(0,"mat-toolbar",0),r.Tb(1,"div",1),r.xc(2," filter notifications "),r.Sb(),r.Tb(3,"button",2),r.bc("click",(function(){return i.close()})),r.Tb(4,"mat-icon"),r.xc(5,"close"),r.Sb(),r.Sb(),r.Sb(),r.wc(6,x,1,0,"mat-progress-bar",3),r.Tb(7,"form",4),r.bc("ngSubmit",(function(){return!i.form.invalid&&i.submit()})),r.Tb(8,"mat-form-field",5),r.Tb(9,"mat-label"),r.xc(10," sort "),r.Sb(),r.Tb(11,"mat-select",6),r.wc(12,w,2,2,"mat-option",7),r.Sb(),r.Tb(13,"button",8),r.bc("click",(function(t){return i.reverse(t)})),r.Tb(14,"mat-icon"),r.xc(15),r.Sb(),r.Sb(),r.wc(16,S,2,1,"mat-error",9),r.Sb(),r.Tb(17,"mat-form-field",5),r.Tb(18,"mat-label"),r.xc(19," limit "),r.Sb(),r.Pb(20,"input",10),r.wc(21,T,2,1,"mat-error",9),r.Sb(),r.Tb(22,"button",11),r.xc(23," submit "),r.Sb(),r.Sb()),2&t&&(r.Bb(6),r.mc("ngIf",i.loading),r.Bb(1),r.mc("formGroup",i.form),r.Bb(5),r.mc("ngForOf",i.sort),r.Bb(3),r.zc(" ",i.form.value.reverse?"arrow_upward":"arrow_downward"," "),r.Bb(1),r.mc("ngIf",i.errors.sort),r.Bb(5),r.mc("ngIf",i.errors.limit))},directives:[u.a,b.a,c.a,o.m,y.q,y.j,y.e,d.c,d.f,m.a,y.i,y.c,o.l,d.g,a.a,y.m,y.a,y.o,h.a,f.h,d.b],styles:[""]}),t})();var P=e("d3yR"),C=e("tyNb"),_=e("6adi");let I=(()=>{class t{transform(t,i,e){return t.filter(t=>void 0===t[i]||t[i].toLowerCase().indexOf(e.toLowerCase())>-1||void 0)}}return t.\u0275fac=function(i){return new(i||t)},t.\u0275pipe=r.Nb({name:"filterBy",type:t,pure:!0}),t})();function k(t,i){if(1&t){const t=r.Ub();r.Tb(0,"button",8),r.bc("click",(function(){return r.qc(t),r.fc().menu.toggle()})),r.Tb(1,"mat-icon"),r.xc(2,"menu"),r.Sb(),r.Sb()}}function B(t,i){1&t&&r.Pb(0,"mat-progress-bar",9)}function F(t,i){if(1&t&&(r.Tb(0,"div",10),r.Tb(1,"div",11),r.Tb(2,"h1"),r.xc(3),r.Sb(),r.Tb(4,"p"),r.xc(5),r.Sb(),r.Sb(),r.Tb(6,"span"),r.xc(7),r.gc(8,"date"),r.Sb(),r.Sb()),2&t){const t=i.$implicit;r.Bb(3),r.zc(" ",t.title," "),r.Bb(2),r.zc(" ",t.message," "),r.Bb(2),r.zc(" ",r.ic(8,3,t.date,"yyyy/MM/dd HH:mm")," ")}}const z=[{path:"",component:(()=>{class t{constructor(t,i,e,n,o){this.menu=t,this.route=i,this.router=e,this.dialog=n,this.service=o,this.sort={key:"date",reverse:!0},this.limit=500,this.filter="",this.notifications=[],this.subscriptions={}}list(){return Object(g.a)(this,void 0,void 0,(function*(){this.loading=!0;const t=yield this.service.list({filter:["date","title","message"],appId:["000000000000000000000002","000000000000000000000014"],sort:{[this.sort.key]:this.sort.reverse?-1:1},limit:this.limit});this.loading=!1,t.ok&&(this.notifications=t.result)}))}OpenFilter(){return Object(g.a)(this,void 0,void 0,(function*(){const t=yield this.dialog.open(M,{data:{sort:this.sort,limit:this.limit},panelClass:"filter-dialog"});yield t.afterClosed().subscribe(t=>Object(g.a)(this,void 0,void 0,(function*(){t&&(this.sort=t.sort,this.limit=t.limit,this.list())})))}))}ngOnInit(){this.subscriptions.params=this.route.queryParams.subscribe(t=>{null!=t.search&&""!==t.search&&(this.filter=t.search)}),this.subscriptions.search=this.search.change.subscribe(t=>{this.filter=t,this.router.navigate(["/notifications"],null!=t&&""!==t?{queryParams:{search:t}}:{queryParams:{}})}),this.list()}ngOnDestroy(){this.subscriptions.params.unsubscribe(),this.subscriptions.search.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(r.Ob(P.a),r.Ob(C.a),r.Ob(C.b),r.Ob(l.b),r.Ob(_.a))},t.\u0275cmp=r.Ib({type:t,selectors:[["app-notifications"]],viewQuery:function(t,i){var e;1&t&&r.uc(v.a,!0),2&t&&r.nc(e=r.cc())&&(i.search=e.first)},decls:12,vars:7,consts:[["color","primary"],["mat-icon-button","","class","menu-toggle",3,"click",4,"ngIf"],[1,"spacer","page-title"],["placeholder","filter notifications"],["mat-icon-button","",3,"click"],["mode","indeterminate",4,"ngIf"],[1,"notifications-container"],["class","notification",4,"ngFor","ngForOf"],["mat-icon-button","",1,"menu-toggle",3,"click"],["mode","indeterminate"],[1,"notification"],[1,"details"]],template:function(t,i){1&t&&(r.Tb(0,"mat-toolbar",0),r.wc(1,k,3,0,"button",1),r.Tb(2,"div",2),r.xc(3," notifications "),r.Sb(),r.Pb(4,"search",3),r.Tb(5,"button",4),r.bc("click",(function(){return i.OpenFilter()})),r.Tb(6,"mat-icon"),r.xc(7,"filter_list"),r.Sb(),r.Sb(),r.Sb(),r.wc(8,B,1,0,"mat-progress-bar",5),r.Tb(9,"div",6),r.wc(10,F,9,6,"div",7),r.gc(11,"filterBy"),r.Sb()),2&t&&(r.Bb(1),r.mc("ngIf",!i.menu.opened),r.Bb(7),r.mc("ngIf",i.loading),r.Bb(2),r.mc("ngForOf",r.jc(11,3,i.notifications,"title",i.filter)))},directives:[u.a,o.m,v.a,b.a,c.a,o.l,h.a],pipes:[I,o.e],styles:[".notifications-container[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(100% - 56px)}.notifications-container[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{height:56px;cursor:pointer;display:flex;align-items:center;border-bottom:1px solid #e0e0e0;flex-direction:row}.notifications-container[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{flex:1 auto;margin:0 16px;display:flex;flex-direction:column}.notifications-container[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:2.5px 0;font-size:14px;line-height:14px;text-transform:uppercase}.notifications-container[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2.5px 0;padding:0;font-size:12px;line-height:12px}.notifications-container[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 16px;font-size:12px;line-height:12px}"]}),t})()}];let j=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(i){return new(i||t)},imports:[[C.e.forChild(z)],C.e]}),t})(),q=(()=>{class t{}return t.\u0275mod=r.Mb({type:t}),t.\u0275inj=r.Lb({factory:function(i){return new(i||t)},imports:[[y.f,s,o.c,n.a,c.b,a.b,m.b,l.c,b.b,u.b,p,d.e,y.n,h.b,j]]}),t})()}}]);