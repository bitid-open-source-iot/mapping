function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"4sOm":function(t,e,i){"use strict";i.r(e),i.d(e,"NotificationsModule",(function(){return Q}));var n,r,o=i("3lET"),s=i("ofXK"),a=i("fXoL"),c=((n=function t(){_classCallCheck(this,t)}).\u0275mod=a.Mb({type:n}),n.\u0275inj=a.Lb({factory:function(t){return new(t||n)},imports:[[s.c]]}),n),l=i("NFeN"),u=i("qFsG"),f=i("bTqV"),b=i("0IaG"),m=i("d3UM"),p=i("/t3+"),h=i("FKr1"),d=((r=function t(){_classCallCheck(this,t)}).\u0275mod=a.Mb({type:r}),r.\u0275inj=a.Lb({factory:function(t){return new(t||r)},imports:[[s.c,l.b,h.m]]}),r),g=i("kmnG"),v=i("bv9b"),y=i("mrSG"),C=i("IQQo"),x=i("3Pt+"),w=i("dWDE");function O(t,e){1&t&&a.Pb(0,"mat-progress-bar",12)}function k(t,e){if(1&t&&(a.Tb(0,"mat-option",13),a.xc(1),a.Sb()),2&t){var i=e.$implicit;a.mc("value",i.value),a.Bb(1),a.zc(" ",i.title," ")}}function _(t,e){if(1&t&&(a.Tb(0,"mat-error"),a.xc(1),a.Sb()),2&t){var i=a.fc();a.Bb(1),a.zc(" ",i.errors.sort," ")}}function P(t,e){if(1&t&&(a.Tb(0,"mat-error"),a.xc(1),a.Sb()),2&t){var i=a.fc();a.Bb(1),a.zc(" ",i.errors.limit," ")}}var S,T,M=((S=function(){function t(e,i,n){_classCallCheck(this,t),this.dialog=e,this.data=i,this.formerror=n,this.form=new x.d({sort:new x.b(this.data.sort.key),limit:new x.b(this.data.limit,[x.p.required,x.p.min(1),x.p.max(1e3)]),reverse:new x.b(this.data.sort.reverse)}),this.sort=[{value:"date",title:"Date"},{value:"title",title:"Title"},{value:"message",title:"Message"}],this.errors={sort:"",limit:"",reverse:"",systemId:""},this.status=[],this.systems=[],this.subscriptions={}}return _createClass(t,[{key:"close",value:function(){this.dialog.close(!1)}},{key:"submit",value:function(){this.dialog.close({sort:{key:this.form.value.sort,reverse:this.form.value.reverse},limit:this.form.value.limit})}},{key:"reverse",value:function(t){t.stopPropagation(),this.form.controls.reverse.setValue(!this.form.value.reverse)}},{key:"ngOnInit",value:function(){var t=this;this.subscriptions.form=this.form.valueChanges.subscribe((function(e){t.errors=t.formerror.validateForm(t.form,t.errors,!0)}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.form.unsubscribe()}}]),t}()).\u0275fac=function(t){return new(t||S)(a.Ob(b.d),a.Ob(b.a),a.Ob(w.a))},S.\u0275cmp=a.Ib({type:S,selectors:[["app-filter-notifications"]],decls:24,vars:6,consts:[["color","primary"],[1,"spacer"],["type","button","mat-icon-button","",3,"click"],["mode","indeterminate",4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","outline"],["name","sort","placeholder","sort","formControlName","sort"],[3,"value",4,"ngFor","ngForOf"],["matSuffix","","type","button","mat-icon-button","",3,"click"],[4,"ngIf"],["matInput","","min","1","max","1000","type","number","name","limit","placeholder","limit","formControlName","limit","required",""],["type","submit","mat-flat-button","","color","primary"],["mode","indeterminate"],[3,"value"]],template:function(t,e){1&t&&(a.Tb(0,"mat-toolbar",0),a.Tb(1,"div",1),a.xc(2," filter notifications "),a.Sb(),a.Tb(3,"button",2),a.bc("click",(function(){return e.close()})),a.Tb(4,"mat-icon"),a.xc(5,"close"),a.Sb(),a.Sb(),a.Sb(),a.wc(6,O,1,0,"mat-progress-bar",3),a.Tb(7,"form",4),a.bc("ngSubmit",(function(){return!e.form.invalid&&e.submit()})),a.Tb(8,"mat-form-field",5),a.Tb(9,"mat-label"),a.xc(10," sort "),a.Sb(),a.Tb(11,"mat-select",6),a.wc(12,k,2,2,"mat-option",7),a.Sb(),a.Tb(13,"button",8),a.bc("click",(function(t){return e.reverse(t)})),a.Tb(14,"mat-icon"),a.xc(15),a.Sb(),a.Sb(),a.wc(16,_,2,1,"mat-error",9),a.Sb(),a.Tb(17,"mat-form-field",5),a.Tb(18,"mat-label"),a.xc(19," limit "),a.Sb(),a.Pb(20,"input",10),a.wc(21,P,2,1,"mat-error",9),a.Sb(),a.Tb(22,"button",11),a.xc(23," submit "),a.Sb(),a.Sb()),2&t&&(a.Bb(6),a.mc("ngIf",e.loading),a.Bb(1),a.mc("formGroup",e.form),a.Bb(5),a.mc("ngForOf",e.sort),a.Bb(3),a.zc(" ",e.form.value.reverse?"arrow_upward":"arrow_downward"," "),a.Bb(1),a.mc("ngIf",e.errors.sort),a.Bb(5),a.mc("ngIf",e.errors.limit))},directives:[p.a,f.a,l.a,s.m,x.q,x.j,x.e,g.c,g.f,m.a,x.i,x.c,s.l,g.g,u.a,x.m,x.a,x.o,v.a,h.h,g.b],styles:[""]}),S),I=i("d3yR"),B=i("tyNb"),F=i("6adi"),j=((T=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"transform",value:function(t,e,i){return t.filter((function(t){return void 0===t[e]||t[e].toLowerCase().indexOf(i.toLowerCase())>-1||void 0}))}}]),t}()).\u0275fac=function(t){return new(t||T)},T.\u0275pipe=a.Nb({name:"filterBy",type:T,pure:!0}),T);function z(t,e){if(1&t){var i=a.Ub();a.Tb(0,"button",8),a.bc("click",(function(){return a.qc(i),a.fc().menu.toggle()})),a.Tb(1,"mat-icon"),a.xc(2,"menu"),a.Sb(),a.Sb()}}function q(t,e){1&t&&a.Pb(0,"mat-progress-bar",9)}function L(t,e){if(1&t&&(a.Tb(0,"div",10),a.Tb(1,"div",11),a.Tb(2,"h1"),a.xc(3),a.Sb(),a.Tb(4,"p"),a.xc(5),a.Sb(),a.Sb(),a.Tb(6,"span"),a.xc(7),a.gc(8,"date"),a.Sb(),a.Sb()),2&t){var i=e.$implicit;a.Bb(3),a.zc(" ",i.title," "),a.Bb(2),a.zc(" ",i.message," "),a.Bb(2),a.zc(" ",a.ic(8,3,i.date,"yyyy/MM/dd HH:mm")," ")}}var N,R,G,D=[{path:"",component:(N=function(){function t(e,i,n,r,o){_classCallCheck(this,t),this.menu=e,this.route=i,this.router=n,this.dialog=r,this.service=o,this.sort={key:"date",reverse:!0},this.limit=500,this.filter="",this.notifications=[],this.subscriptions={}}return _createClass(t,[{key:"list",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.service.list({filter:["date","title","message"],appId:["000000000000000000000002","000000000000000000000014"],sort:_defineProperty({},this.sort.key,this.sort.reverse?-1:1),limit:this.limit});case 3:e=t.sent,this.loading=!1,e.ok&&(this.notifications=e.result);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"OpenFilter",value:function(){return Object(y.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.dialog.open(M,{data:{sort:this.sort,limit:this.limit},panelClass:"filter-dialog"});case 2:return e=t.sent,t.next=5,e.afterClosed().subscribe((function(t){return Object(y.a)(i,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(this.sort=t.sort,this.limit=t.limit,this.list());case 1:case"end":return e.stop()}}),e,this)})))}));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"ngOnInit",value:function(){var t=this;this.subscriptions.params=this.route.queryParams.subscribe((function(e){null!=e.search&&""!==e.search&&(t.filter=e.search)})),this.subscriptions.search=this.search.change.subscribe((function(e){t.filter=e,t.router.navigate(["/notifications"],null!=e&&""!==e?{queryParams:{search:e}}:{queryParams:{}})})),this.list()}},{key:"ngOnDestroy",value:function(){this.subscriptions.params.unsubscribe(),this.subscriptions.search.unsubscribe()}}]),t}(),N.\u0275fac=function(t){return new(t||N)(a.Ob(I.a),a.Ob(B.a),a.Ob(B.b),a.Ob(b.b),a.Ob(F.a))},N.\u0275cmp=a.Ib({type:N,selectors:[["app-notifications"]],viewQuery:function(t,e){var i;1&t&&a.uc(C.a,!0),2&t&&a.nc(i=a.cc())&&(e.search=i.first)},decls:12,vars:7,consts:[["color","primary"],["mat-icon-button","","class","menu-toggle",3,"click",4,"ngIf"],[1,"spacer","page-title"],["placeholder","filter notifications"],["mat-icon-button","",3,"click"],["mode","indeterminate",4,"ngIf"],[1,"notifications-container"],["class","notification",4,"ngFor","ngForOf"],["mat-icon-button","",1,"menu-toggle",3,"click"],["mode","indeterminate"],[1,"notification"],[1,"details"]],template:function(t,e){1&t&&(a.Tb(0,"mat-toolbar",0),a.wc(1,z,3,0,"button",1),a.Tb(2,"div",2),a.xc(3," notifications "),a.Sb(),a.Pb(4,"search",3),a.Tb(5,"button",4),a.bc("click",(function(){return e.OpenFilter()})),a.Tb(6,"mat-icon"),a.xc(7,"filter_list"),a.Sb(),a.Sb(),a.Sb(),a.wc(8,q,1,0,"mat-progress-bar",5),a.Tb(9,"div",6),a.wc(10,L,9,6,"div",7),a.gc(11,"filterBy"),a.Sb()),2&t&&(a.Bb(1),a.mc("ngIf",!e.menu.opened),a.Bb(7),a.mc("ngIf",e.loading),a.Bb(2),a.mc("ngForOf",a.jc(11,3,e.notifications,"title",e.filter)))},directives:[p.a,s.m,C.a,f.a,l.a,s.l,v.a],pipes:[j,s.e],styles:[".notifications-container[_ngcontent-%COMP%]{overflow-y:auto;max-height:calc(100% - 56px)}.notifications-container[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]{height:56px;cursor:pointer;display:flex;align-items:center;border-bottom:1px solid #e0e0e0;flex-direction:row}.notifications-container[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{flex:1 auto;margin:0 16px;display:flex;flex-direction:column}.notifications-container[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:2.5px 0;font-size:14px;line-height:14px;text-transform:uppercase}.notifications-container[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2.5px 0;padding:0;font-size:12px;line-height:12px}.notifications-container[_ngcontent-%COMP%]   .notification[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 16px;font-size:12px;line-height:12px}"]}),N)}],E=((G=function t(){_classCallCheck(this,t)}).\u0275mod=a.Mb({type:G}),G.\u0275inj=a.Lb({factory:function(t){return new(t||G)},imports:[[B.e.forChild(D)],B.e]}),G),Q=((R=function t(){_classCallCheck(this,t)}).\u0275mod=a.Mb({type:R}),R.\u0275inj=a.Lb({factory:function(t){return new(t||R)},imports:[[x.f,c,s.c,o.a,l.b,u.b,m.b,b.c,f.b,p.b,d,g.e,x.n,v.b,E]]}),R)}}]);